# Docker Commands

আমরা এই লেকচারে কিছু ডকার কম্যান্ড সম্বন্ধে জানবো।

* ## docker run 

`docker run` কম্যান্ডটি একটি `image` থেকে একটি `container`  বানানোর জন্য ব্যাবহার করা হয়। 

> docker run nginx

`docker run nginx` কম্যান্ডটি ডকার হোস্ট মেশিনে `nginx` এপ্লিকেশনের একটি `instance` রান করবে যদি সেটা অলরেডি হোস্ট মেশিনে একজিস্ট করে। যদি হোস্ট মেশিনে না থাকে তাহলে `docker hub` থেকে pull করে run করবে।

![](Screenshot%20from%202022-04-28%2012-01-53.png)

কিন্তু এই pull শুধুমাত্র প্রথম বারের জন্যে হয়, পরবর্তীতে একই কম্যান্ড ব্যাবহার করলে নতুন করে pull করতে হয় না, অলরেডি pull করা ইমেজ পুনরায় ব্যবহৃত হবে। 


* ## docker ps

`docker ps` কম্যান্ড কিছু বেসিক ডিটেইলস সহ (কনটেইনার আইডি, ইমেজের নাম যেটা আমরা কটনেইনার রান করতে ব্যবহার করেছি, কারেন্ট স্ট্যাটাস, কনটেইনারের নাম) সব রানিং কনটেইনারের একটি তালিকা দেই। প্রত্যেক কনটেইনার তার জন্য অটোমেটিক্যালি একটি র‌্যানডোম আইডি ও নাম পায় যা ডকার দ্বারা তৈরি। এই ক্ষেত্রে সেটা `silly-sammet` 

> docker ps

![](Screenshot%20from%202022-04-28%2012-02-30.png)

* ## docker ps -a

রানিং বা নন-রানিং সব কনটেইনারের ডিটেইলস জানার জন্যে `docker ps -a` কম্যান্ড ব্যবহার করতে হবে। 

> docker ps -a

![](Screenshot%20from%202022-04-28%2012-02-55.png)

কনটেইনার ডিটেইলস command এবং port ফিল্ডস সম্পর্কে আমরা এই কোর্সের পরবর্তীতে জানতে পারবো। 

* ## docker run -d && docker attach

কোন কনটেইনার detached মোডে চালু না করলে প্রসেস শেষ না হওয়া পর্যন্ত প্রম্প্টে ব্যাক করা যায় না। এক্ষেত্রে `CTRL + c` ব্যবহার করে প্রসেস থেকে বের হয়ে প্রম্প্টে ফিরে আসা যায়। 

কোন কনটেইনার detached মোডে অর্থাৎ ব্যাকগ্রাউন্ডে রান করাতে চাইলে -d অপশান ব্যবহার করতে হবে। `docker run -d` কম্যান্ড ব্যবহার করে ব্যাকগ্রাউন্ডে কনটেইনারটি চালানো যাবে এবং সাথে সাথে প্রম্প্টে ব্যাক করবে। এক্ষেত্রে `docker ps -a` কম্যান্ড ব্যবহার করলে দেখা যাবে কনটেইনারটি রানিং আছে। 

> docker run -d kodekloud/simple-webapp

![](Screenshot%20from%202022-04-28%2012-34-24.png)

তবে পুনরায় রানিং কনটেইনারে attach হতে চাইলে `docker attach` কম্যান্ড ব্যবহার করতে হবে। তবে অবশ্যই সাথে কনটেইনার আইডি বা নাম উল্লেখ করতে হবে। আইডি বা নাম মনে না থাকলে `docker ps` কম্যান্ড ব্যবহার করে দেখে নিতে হবে। কনটেইনার আইডি প্রোভাইড করার সময় পুরো আইডি না দিয়ে অল্প কিছু ক্যারেক্টার (যেন অন্য সব কনটেইনার আইডি থেকে ভিন্ন হয় ) ব্যবহার করা যেতে পারে। যেমন এক্ষেত্রে পুরো আইডি না দিয়ে শুধু a043d ব্যবহার করা হয়েছে। 

> docker attach a043d

![](Screenshot%20from%202022-04-28%2012-34-35.png)


* ## docker stop

কোন কনটেইনার stop করার জন্যে `docker stop` কম্যান্ড ব্যবহার করতে হবে। তবে অবশ্যই সাথে কনটেইনার আইডি বা নাম উল্লেখ করতে হবে। আইডি বা নাম মনে না থাকলে `docker ps` কম্যান্ড ব্যবহার করে দেখে নিতে হবে। stop করার পর `docker ps` কম্যান্ড ব্যবহার করলে কোন রানিং কনটেইনার দেখাবে না। তবে `docker ps -a` কম্যান্ড ব্যবহার করলে সেখানে `Exited a few seconds ago`- Status এ দেখা যাবে কনটেইনারটি। 

> docker stop silly_sammet

![](Screenshot%20from%202022-04-28%2012-03-15.png)


* ## docker rm

ষদি আমরা চাই কনটেইনারটি পুরোপুরি remove করে দিতে, তাহলে `docker rm` কম্যান্ড ব্যবহার করতে হবে। অবশ্যই সাথে কনটেইনার আইডি বা নাম উল্লেখ করতে হবে। আইডি বা নাম মনে না থাকলে `docker ps` কম্যান্ড ব্যবহার করে দেখে নিতে হবে। remove করার পর `docker ps -a` কম্যান্ড ব্যবহার করলে কনটেইনারটি আর দেখাবে না। 
> docker rm silly_sammet

![](Screenshot%20from%202022-04-28%2012-03-29.png)


* ## docker images

`docker images` কম্যান্ড ব্যবহার করে আমাদের হোস্টে যেসব ইমেজ আছে এবং তাদের সাইজ সম্পর্কে জানা যাবে।  এখানে চারটা ইমেজ আছে। nginx, redis, ubuntu, alpine 

> docker images

![](Screenshot%20from%202022-04-28%2012-03-40.png)


* ## docker rmi

কোন ইমেজ ব্যবহার করার প্রয়োজন না থাকলে তা remove করতে চাইলে `docker rmi` কম্যান্ড ব্যবহার করে ইমেজ নাম দিতে হবে। এক্ষেত্রে নিশ্চিত করতে হবে যাতে এই ইমেজের কোন কনটেইনার রানিং না থাকে। কোন ইমেজ remove করতে হলে অবশ্যই ঐ ইমেজের উপর dependent সব কনটেইনার `stop` ও `delete` করতে হবে । 

> docker rmi nginx

![](Screenshot%20from%202022-04-28%2012-03-58.png)


* ## docker pull

আমরা পূর্বে দেখেছি যে কোন কনটেইনার রান করার সময় আমরা যে nginx ইমেজ ব্যবহার করি তা লোকালে অ্যাভেইলেবল না থাকায় ডকার-কে pull করতে হয়। কিন্তু চাইলে আমরা ইমেজটি আগেই ডাউনলোড করে রেখে দিতে পারি। এতে আমাদের pull করার জন্যে অপেক্ষা করতে হবে না। এক্ষেত্রে আমরা `docker pull` কম্যান্ড ব্যবহার করতে পারি। এটি একটি ইমেজ pull করবে কিন্তু সাথে সাথে কোন কনটেইনার রান করবে না। 

> docker pull nginx

![](Screenshot%20from%202022-04-28%2012-04-13.png)


* ## Append a command

এখন মনে করো তুমি একটা কনটেইনার run করলে ubuntu ইমেজ ব্যবহার করে। এই কনটেইনার ubuntu ইমেজের একটা instance রান করবে এবং সাথে সাথে `Exit State`-এ চলে যাবে। `docker ps` কম্যান্ড ব্যবহার করলে দেখবে সেখানে কোন রানিং কনটেইনার নেই। `docker ps -a` কম্যান্ড ব্যবহার করলে দেখবে এটা `Exited State`-এ আছে। এটার কারণ কী? 

![](Screenshot%20from%202022-04-28%2012-04-32.png)

ভার্চুয়াল মেশিনের (VM) মতো কনটেইনার কোন অপারেটিং সিস্টেমকে হোস্ট করে না। কনটেইনার একটি স্পেসিফিক টাস্ক বা প্রসেস ( একটি ওয়েব সার্ভার ইন্সটান্স হোস্ট করা, অ্যাপলিকেশন সার্ভার হোস্ট করা, ডাটাবেজ বা সিম্পল কোন কম্পিউটেশনাল টাস্ক হোস্ট করা) রান করে। টাস্ক শেষ হয়ে গেলে কনটেইনার Exit করে। কনটেইনার ততক্ষণ জীবিত থাকে যতক্ষণ এর মধ্যে থাকা প্রসেস জীবিত থাকে। যদি কনটেইনারের ভেতরের ওয়েব সার্ভিস বন্ধ হয়ে যায় বা ক্র্যাশ করে, তাহলে কনটেইনার বন্ধ হয়ে যায়। এই জন্যে যখন ubuntu ইমেজের একটি কনটেইনার রান করা হয় তখন তা সাথে সাথে বন্ধ হয়ে যায়। ubuntu অপারেটিং সিস্টেমের একটি ইমেজ যেটা অন্য অ্যাপ্লিকেশনের বেস ইমেজ হিসেবে ব্যবহৃত হয়। এখানে by default কোন প্রসেস বা অ্যাপ্লিকেশন রান হয় না। তবে ubuntu সহ অন্যান্য যেসব ইমেজ কোন সার্ভিস রান করে না, `docker run` কম্যান্ড ব্যবহার করে তাদের একটি নির্দিষ্ট প্রসেস রান করার নির্দেশ দেওয়া যায়। যেমন `docker run ubuntu sleep 5` কম্যান্ড ব্যবহার করে একটি ubuntu ইমেজ রান করলে তা পাঁচ সেকেন্ডের জন্যে sleep মোডে যাবে এবং sleep প্রসেস বন্ধ হয়ে যাওয়ার পর কনটেইনারটি বন্ধ হয়ে যাবে। 

> docker run ubuntu sleep 5

![](Screenshot%20from%202022-04-28%2012-04-42.png)

![](Screenshot%20from%202022-04-28%2012-05-05.png)


* ## docker exec
 
এতক্ষণ আমরা দেখলাম ডকার রান করার সময় কীভাবে একটি কম্যান্ড এক্সিকিউট করা যায়। কিন্তু আমরা যদি চাই একটি রানিং কনটেইনারে কিছু কম্যান্ড এক্সিকিউট করবো, তাহলে কী করতে হবে? 

এখানে দেখা যাচ্ছে ubuntu ইমেজ ব্যবহার করা কনটেইনারটি sleep 100 কম্যান্ডের কারণে একশো সেকেন্ডের sleep মোডে রানিং আছে। এখন যদি আমরা কটনেইনারটির অভ্যন্তরীণ কোন ফাইলের তথ্য দেখতে চাই তাহলে আমাকে `docker exec` কম্যান্ড ব্যবহার করতে হবে। `docker exec distracted_mcclintock cat etc/hosts` কম্যান্ড ব্যবহার করে /etc/hosts ফাইলের তথ্যগুলো প্রিন্ট করা যাবে।

> docker exec distracted_mcclintock cat etc/hosts
 
![](Screenshot%20from%202022-04-28%2012-05-14.png)

[previous page](https://github.com/Raisul191491/Docker-Beginner/blob/main/Docker-introduction/Introduction.md) <--> [next page](https://github.com/Raisul191491/Docker-Beginner/blob/main/Docker-run/Docker_run.md)
