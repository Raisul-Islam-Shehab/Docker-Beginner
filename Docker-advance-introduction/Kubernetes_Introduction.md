# Kubernetes

docker CLI এর মাধ্যমে আমরা একটি এপ্লিকেশনের একটি ইন্সটেন্স রান করতে পারি। কিন্তু kube control (kubernetes CLI) ব্যবহার করে একটি কমান্ডের দ্বারা আমরা একটি এপ্লিকেশনের হাজার হাজার ইন্সটেন্স রান করতে পারি।
```
kubectl run --replicas=1000 application_name
```

উপরোক্ত কমান্ডের মাধ্যমে application_name নামক একটি এপ্লিকেশনের ১০০০টি ইন্সটেন্স রান করা হয়েছে। আরেকটি কমান্ডের মাধ্যমে আমরা একলাফে ২০০০টি ইন্সটেন্স রান করাতে পারি:
```
kubectl scale --replicas=2000 application_name
```
kubernetes এর এই প্রসেসটি চাইলে অটোমেট করা যায় যাতে ইন্সটেন্স সংখ্যা ইউজার লোডের উপর ভিত্তি করে প্রয়োজন অনুযায়ী উঠানামা করতে পারে। প্রতিটি মেজর ক্লাউড সার্ভিস প্রোভাইডারের নেটিভ kubernetes সাপোর্ট আছে।

এখন প্রশ্ন হল ডকার এবং kubernetes এর মধ্যে সম্পর্ক কী? Kubernetes ডকার হোস্ট ব্যবহার করে কোনো এপ্লিকেশনকে  ডকার কন্টেইনাররূপে হোস্ট করে।

img1

## Kubernetes আর্কিটেকচার
একটি kubernetes ক্লাস্টার একাধিক নোড দিয়ে গঠিত। নোড হল একটি মেশিন যাতে kubernetes ইন্সটল করা থাকে। নোডের মধ্যে kubernetes কন্টেইনার রান করে। ক্লাস্টারের মধ্যে কোনো একটি নোড ফেইল করলেও অপর নোডগুলোর মাধ্যমে এপ্লিকেশনটি এক্সেস করা যায়। নোডগুলির মধ্যে একটি মাস্টার নোড থাকে যার মধ্যে kubernetes control plane component গুলি ইন্সটল করা থাকে। মাস্টার নোডটি অন্য নোডগুলোর মধ্যে সমন্বয় করে।

img2

img3

## কম্পোনেন্ট
কোনো সিস্টেমে kubernetes ইন্সটল করলে নিম্নলিখিত কম্পনেন্ট গুলি ইন্সটল হয়:
API server, etcd, kubelet, Container runtime, Controller, Scheduler.

API server, kubernetes এর ফ্রন্টএন্ড হিসেবে কাজ করে। ইউজারের CLI উক্ত API server এর সাথে কাজ করে kubernetes ক্লাস্টারের সাথে যোগাযোগ করে। 

etcd একটি ডিস্ট্রিবিউটেড key-value store যা ব্যবহার করে kubernetes ক্লাস্টার মেনেজ করার জন্য প্রয়োজনীয় সব ডেটা সংরক্ষণ করে। etcd প্রতিটি মাস্টার এবং নোডে ডিস্ট্রিবিউটেড ভাবে ইনফরমেশন সংরক্ষণ করে। 

Scheduler এর মাধ্যমে কন্টেইনার সমূহ বিভিন্ন নোডে ভাগ করে দেয়া হয়। এটি নতুন কন্টেইনারগুলোকে নোডগুলোতে এসাইন করে দেয়। 

Controller হল কন্টেইনারগুলো সমন্বয় করার ব্রেন। কোনো নোড কন্টেইনার বা এন্ডপয়েন্ট কাজ না করলে Controller রেস্পন্ড করে। এসব ক্ষেত্রে Controller নতুন কন্টেইনার যুক্ত করার মত ডিসিশন নিতে পারে। 

Container Runtime হল এমন একটি সফটওয়্যার যা কন্টেইনার রান করার জন্য ব্যবহার করা হয়। আমাদের ক্ষেত্রে Container Runtime হল ডকার। 

Kubelet হল একটি এজেন্ট যা ক্লাস্টারের প্রত্যেকটি নোডে কাজ করে। প্রতিটি কন্টেইনার নোডগুলোতে রান করছে কিনা এই ব্যাপারটি kubelet নিশ্চিত করে।
## kubectl
kubectl বা kube control tool হল kubernetes CLI যার মাধ্যমে  kubernetes ক্লাস্টারে এপ্লিকেশন ডেপ্লয় এবং মেনেজ করা হয়। এর মাধ্যমে ক্লাস্টার সম্পর্কিত ইনফরমেশন,  নোডগুলোর স্টেটাস জানা যায়। kubectl run কমান্ড দিয়ে ক্লাস্টারে কোনো এপ্লিকেশন ডেপ্লয় করা যায়।
```
kubectl run hello-minikube
```
hello-minikube হল এপ্লিকেশনটির নাম।

cluster-info কমান্ডটির মাধ্যমে ক্লাস্টারের ইনফরমেশন দেখা যায়। get nodes কমান্ডটি ক্লাস্টারের সবগুলো নোড লিস্ট করে দেখায়।
```
kubectl cluster-info
kubectl get nodes
```